<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>rounds-follow-mouse</title>
  <style>
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      margin: 0;
      background-color: #000;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <script>
    const canvas = document.querySelector('#canvas');
    const context = canvas.getContext('2d');
    const docWidth = document.documentElement.clientWidth;
    const docHeight = document.documentElement.clientHeight;
    canvas.width = docWidth;
    canvas.height = docHeight;

    const settings = {
      color: null,
      r: 0.9,
      step: 0.09,
    };

    let rounds = [];
    let fillColor = '';
    let initHSL = 0;
    if (settings.color) {
      fillColor = settings.color;
    } else {
      initHSL = Math.random() * 360;
    }

    window.onmousemove = function(evt) {
      const mouseX = evt.clientX;
      const mouseY = evt.clientY;

      rounds.push({
        mouseX,
        mouseY,
        r: settings.r,
        stay: 1,
      })
    };

    function draw() {
      if (!fillColor) {
        initHSL += 0.1;
        fillColor = `hsl(${initHSL}, 100%, 80%)`;
      }

      context.clearRect(0, 0, docWidth, docHeight);

      for (let i = 0; i < rounds.length; i++) {
        const round = rounds[i];
        const { mouseX, mouseY, r } = round;
        context.fillStyle = fillColor;
        context.beginPath();
        context.arc(mouseX, mouseY, r, 0, Math.PI * 2);
        context.closePath();
        context.fill();

        rounds[i].r += settings.r;
        rounds[i].stay -= settings.step;

        if (rounds[i].stay <= 0) {
          rounds.splice(i, 1);
          i--;
        }
      }
    }

    function animate() {
      draw();

      window.requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
